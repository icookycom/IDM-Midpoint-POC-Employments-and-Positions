<apti:object xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3" xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" oid="781070d6-01f0-45a9-aaa7-93a721b6f62c" version="138"  xsi:type="c:ObjectTemplateType">
        <_metadata id="3">
            <storage>
                <createTimestamp>2024-11-08T07:43:54.572Z</createTimestamp>
                <createChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</createChannel>
                <modifyTimestamp>2025-05-23T11:54:34.274Z</modifyTimestamp>
                <modifierRef>
                    <t:oid>00000000-0000-0000-0000-000000000002</t:oid>
                    <t:relation xmlns="http://prism.evolveum.com/xml/ns/public/types-3">org:default</t:relation>
                    <t:type xmlns="http://prism.evolveum.com/xml/ns/public/types-3">c:UserType</t:type>
                </modifierRef>
                <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</modifyChannel>
            </storage>
            <process>
                <requestTimestamp>2025-03-26T06:13:58.402Z</requestTimestamp>
                <requestorRef>
                    <t:oid>00000000-0000-0000-0000-000000000002</t:oid>
                    <t:relation xmlns="http://prism.evolveum.com/xml/ns/public/types-3">org:default</t:relation>
                    <t:type xmlns="http://prism.evolveum.com/xml/ns/public/types-3">c:UserType</t:type>
                </requestorRef>
            </process>
        </_metadata>
        <name>POCE Person Employment MS AD Account Object Template</name>
        <operationExecution id="134">
            <recordType>simple</recordType>
            <timestamp>2025-04-03T07:39:10.534Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>modify</t:changeType>
                    <t:objectType>c:ObjectTemplateType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000158844</token>
                </executionResult>
                <objectName>POCE Person Employment MS AD Account Object Template</objectName>
            </operation>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="135">
            <recordType>simple</recordType>
            <timestamp>2025-04-03T07:40:22.444Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>modify</t:changeType>
                    <t:objectType>c:ObjectTemplateType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000159624</token>
                </executionResult>
                <objectName>POCE Person Employment MS AD Account Object Template</objectName>
            </operation>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="138">
            <recordType>simple</recordType>
            <timestamp>2025-04-03T09:54:04.374Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>modify</t:changeType>
                    <t:objectType>c:ObjectTemplateType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000049540</token>
                </executionResult>
                <objectName>POCE Person Employment MS AD Account Object Template</objectName>
            </operation>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="145">
            <recordType>complex</recordType>
            <timestamp>2025-05-13T08:48:08.941Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="ea939731-75b9-4887-9069-59266fd2ec03" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="146">
            <recordType>complex</recordType>
            <timestamp>2025-05-13T08:52:43.283Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="5d387239-1e04-4f3b-8a08-0532c77f08fb" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="147">
            <recordType>complex</recordType>
            <timestamp>2025-05-22T15:29:00.975Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="b762dd06-578b-45a0-9f85-f4e624491d7b" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="148">
            <recordType>complex</recordType>
            <timestamp>2025-05-23T03:58:45.547Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="8f876e05-64ea-4cf6-aa97-376b6472f826" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="149">
            <recordType>complex</recordType>
            <timestamp>2025-05-23T09:05:18.347Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="1333d492-e976-4f11-85c4-1dc17d598c08" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="151">
            <recordType>simple</recordType>
            <timestamp>2025-05-23T11:53:55.511Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>modify</t:changeType>
                    <t:objectType>c:ObjectTemplateType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000071489</token>
                </executionResult>
                <objectName>POCE Person Employment MS AD Account Object Template</objectName>
            </operation>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="154">
            <recordType>simple</recordType>
            <timestamp>2025-05-23T11:54:34.293Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>modify</t:changeType>
                    <t:objectType>c:ObjectTemplateType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000071799</token>
                </executionResult>
                <objectName>POCE Person Employment MS AD Account Object Template</objectName>
            </operation>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <iteration>0</iteration>
        <iterationToken/>
        <iterationSpecification>
            <maxIterations>99</maxIterations>
            <tokenExpression>
                <description>The iteration starts with empty string, then a number is appended, starting with 2 (skipping 1), 3, ... up to 99.</description>
                <documentation>
                Example, how the iteration could look like if `jsmith` username is already taken:

                . jsmith
                . jsmith2
                . jsmith3
                . ... up to jsmith99

                If even `jsmith99` cannot be used because it already exists, the attempt to create user in midPoint will fail.

                `maxIterations` can be updated.

                Also, the script can be updated to prepare iterationToken variable in a different way.

                E.g. iterationToken can be created as '02' instead of just '2'. Or a random number instead of a sequential iterator can be used.
            </documentation>
                <script>
                    <code>
                    if (iteration == 0) {
                        return ""
                    } else {
                        // for 8+2 naming convention, we might want to use %02d instead
                        //return sprintf("%02d", iteration+1)
                        return iteration + 1
                    }
                </code>
                </script>
            </tokenExpression>
        </iterationSpecification>
        <mapping id="8">
            <name>01</name>
            <source>
                <path>c:givenName</path>
            </source>
            <expression/>
            <target>
                <path>c:givenName</path>
            </target>
        </mapping>
        <mapping id="9">
            <name>02</name>
            <source>
                <path>c:familyName</path>
            </source>
            <expression/>
            <target>
                <path>c:familyName</path>
            </target>
        </mapping>
        <mapping id="10">
            <name>03</name>
            <source>
                <path>c:additionalName</path>
            </source>
            <expression/>
            <target>
                <path>c:additionalName</path>
            </target>
        </mapping>
        <mapping id="11">
            <name>04</name>
            <source>
                <path>c:personalNumber</path>
            </source>
            <expression/>
            <target>
                <path>c:personalNumber</path>
            </target>
        </mapping>
        <mapping id="12">
            <name>05</name>
            <source>
                <path>c:personalNumber</path>
            </source>
            <source>
                <path>c:organizationalUnit</path>
            </source>
            <expression>
                <script>
                    <code>personalNumber + " " + organizationalUnit + " Employment MS AD Account"</code>
                </script>
            </expression>
            <target>
                <path>c:name</path>
            </target>
        </mapping>
        <mapping id="13">
            <name>06</name>
            <source>
                <path>c:costCenter</path>
            </source>
            <expression/>
            <target>
                <path>c:costCenter</path>
            </target>
        </mapping>
        <mapping id="14">
            <name>07</name>
            <source>
                <path>c:organizationalUnit</path>
            </source>
            <expression/>
            <target>
                <path>c:organizationalUnit</path>
            </target>
        </mapping>
        <mapping id="15">
            <name>08</name>
            <source>
                <path>c:organization</path>
            </source>
            <expression/>
            <target>
                <path>c:organization</path>
            </target>
        </mapping>
        <mapping id="16">
            <name>09</name>
            <source>
                <path xmlns:gen974="http://example.com/xml/ns/mySchema">c:extension/gen974:person_employment_type</path>
            </source>
            <expression/>
            <target>
                <path xmlns:gen695="http://example.com/xml/ns/mySchema">c:extension/gen695:person_employment_type</path>
            </target>
        </mapping>
        <mapping id="17">
            <name>10</name>
            <exclusive>true</exclusive>
            <source>
                <path>c:extension/person_forward_roles</path>
            </source>
            <source>
                <path xmlns:gen492="http://example.com/xml/ns/mySchema">c:extension/gen492:person_forward_roles_inherited</path>
            </source>
            <expression>
                <script>
                    <relativityMode>absolute</relativityMode>
                    <code>
                result = []


for (i in person_forward_roles)
{
if (i.startsWith("MSAD"))
{ii = i.tokenize( '|' )
result.add(ii[2])}
}
for (i in person_forward_roles_inherited)
{
if (i.startsWith("MSAD"))
{ii = i.tokenize( '|' )
if (ii[5] != "1")
{
result.add(ii[2])
}
}
}

return result.unique()</code>
                </script>
            </expression>
            <target>
                <path>c:extension/person_forward_roles</path>
            </target>
        </mapping>
        <mapping id="110">
            <name>adminStatus to persona</name>
            <source>
                <path>c:activation/c:administrativeStatus</path>
            </source>
            <expression/>
            <target>
                <path>c:activation/c:administrativeStatus</path>
            </target>
        </mapping>
        <mapping id="111">
            <name>11</name>
            <authoritative>true</authoritative>
            <strength>strong</strength>
            <expression>
                <script>
                    <code>'0'</code>
                </script>
            </expression>
            <target>
                <path xmlns:gen23="http://example.com/xml/ns/mySchema">c:extension/gen23:person_account_number</path>
            </target>
        </mapping>
        <mapping id="140">
            <name>088</name>
            <source>
                <path>c:nickName</path>
            </source>
            <expression/>
            <target>
                <path>c:nickName</path>
            </target>
        </mapping>
        <mapping id="150">
            <name>0888</name>
            <source>
                <_metadata id="152">
                    <provenance>
                        <acquisition id="153">
                            <actorRef>
                                <t:oid>00000000-0000-0000-0000-000000000002</t:oid>
                                <t:relation xmlns="http://prism.evolveum.com/xml/ns/public/types-3">org:default</t:relation>
                                <t:type xmlns="http://prism.evolveum.com/xml/ns/public/types-3">c:UserType</t:type>
                            </actorRef>
                            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
                            <timestamp>2025-05-23T11:54:34.248Z</timestamp>
                        </acquisition>
                    </provenance>
                </_metadata>
                <path xmlns:gen817="http://example.com/xml/ns/mySchema">c:extension/gen817:person_boss</path>
            </source>
            <expression/>
            <target>
                <path xmlns:gen883="http://example.com/xml/ns/mySchema">c:extension/gen883:person_boss</path>
            </target>
        </mapping>
    </apti:object>
